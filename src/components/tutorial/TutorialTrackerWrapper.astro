---
import TutorialTracker from '~/components/tutorial/TutorialTracker.astro';
import TabbedContent from '~/components/tabs/TabbedContent.astro';
import TabListItem from '~/components/tabs/TabListItem.astro';
import TabPanel from '~/components/tabs/TabPanel.astro';
---

<div class="TutorialTrackerWrapper" id="TutorialTrackerWrapper">
    <h2>Tutorial Tracker v2</h2>

    <div class="tabs">
      
      <!-- Tab Headers -->
      <div class="tabHeaders">
        
        <div 
          class="tabHeaderCell active" 
          data-tab-id="tab-1" 
          data-initial="true"
          onClick="tabClick();" 
        >
          <h3>Tutorial 1</h3>
        </div>

        <div 
          class="tabHeaderCell" 
          data-tab-id="tab-2" 
          data-initial=""
          onClick="tabClick();"
        >
          <h3>Tutorial 2</h3>
        </div>

        <div 
          class="tabHeaderCell" 
          data-tab-id="tab-3" 
          data-initial=""
          onClick="tabClick();"
        >
          <h3>Tutorial 3</h3>
        </div>

      </div>

      <!-- Tab Contents -->
      <div class="tabContents">

        <div class="tabContentsCell active" data-tab-id="tab-1" data-initial="true">
          <TutorialTracker tutorial="tutorial-1"/>
        </div>

        <div class="tabContentsCell" data-tab-id="tab-2" data-initial="">
          <TutorialTracker tutorial="tutorial-2"/>
        </div>

        <div class="tabContentsCell" data-tab-id="tab-3" data-initial="">
          <TutorialTracker tutorial="tutorial-3"/>
        </div>

      </div>
      
        
    </div>
</div>

<style lang="scss">
  .TutorialTrackerWrapper{
    
  }

  .tabHeaders{
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    
    .tabHeaderCell{
      //border: 1px solid var(--custom-accent-1-50);
      padding: 1rem;
      margin-right: 1rem;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      h3{
        margin-bottom: 0;
      }
      &:hover{
        text-decoration: underline;
        cursor: pointer;
      }
      &.active{
        background-color: var(--custom-teal-25);
      }
    }
  }
  
  .tabContents{
    background-color: var(--custom-teal-25);
    padding: 1rem;
    .tabContentsCell{
      display: none;
      &.active{
        display:block;
      }
    }
  }
</style>

<script type="text/javascript">
  function tabClick(){
    //DOM vars
      var tabHeaders = document.querySelector("#TutorialTrackerWrapper .tabHeaders");
      var tabHeaders = document.querySelector("#TutorialTrackerWrapper .tabHeaders");
      var onClickThis = event.currentTarget;

    //grab tab-id
      var tabID = onClickThis.getAttribute("data-tab-id");
      console.log(tabID);

    //remove active class from previous tab
      var activeElements = document.querySelectorAll('#TutorialTrackerWrapper .active');
      activeElements.forEach(element => {
        element.classList.remove("active");
      });

    //add active class to new tab
      var targetElements = document.querySelectorAll("#TutorialTrackerWrapper [data-tab-id='"+tabID+"']");
      targetElements.forEach(element => {
        element.classList.add("active");
      });

  }
</script>